(()=>{"use strict";const e=document.querySelector(".textarea");var t;e.focus(),(t=e).addEventListener("keydown",(e=>{"Backspace"!==e.key&&" "!==e.key||1===t.children.length&&t.children[0].innerText<1&&e.preventDefault()})),(e=>{e.addEventListener("input",(()=>{for(let t=0;t<e.children.length;t++)e.children[t].innerText<1?e.children[t].classList.remove("hide-placeholder"):e.children[t].classList.add("hide-placeholder")}))})(e),(e=>{e.addEventListener("input",(()=>{const e=document.querySelector(".block-picker"),{x:t,y:n}=(()=>{const e=document.getSelection().getRangeAt(0);let t,n;const c=e.startContainer,o=e.startOffset;if(o>0)return n=document.createRange(),n.setStart(c,o-1),n.setEnd(c,o),t=n.getBoundingClientRect(),{x:t.right,y:t.top};if(o<c.length)return n=document.createRange(),n.setStart(c,o),n.setEnd(c,o+1),t=n.getBoundingClientRect(),{x:t.left,y:t.top};t=c.getBoundingClientRect();const r=getComputedStyle(c),d=(parseInt(r.lineHeight)-parseInt(r.fontSize))/2;return{x:t.left,y:t.top+d}})();e.style.position="fixed",e.style.top=n+35+"px",e.style.left=t+10+"px"}))})(e),(e=>{e.addEventListener("keydown",(e=>{const t=document.querySelector(".block-picker");"/"===e.key&&t.classList.add("open"),"Escape"===e.key&&t.classList.remove("open")}))})(e),(e=>{const t=document.querySelector(".block-picker"),n=document.getElementById("h1-block"),c=document.getElementById("h2-block"),o=document.getElementById("h3-block"),r=n=>{e.innerHTML+=n,t.classList.remove("open"),(()=>{if(!window.getSelection())return;const e=window.getSelection().focusNode.innerHTML.length;for(let t=0;t<e+1;t++)window.getSelection()?.modify("move","forward","character")})()};n.addEventListener("click",(e=>{r("<h1 data-placeholder='Heading 1'><br /></h1>")})),c.addEventListener("click",(e=>{r("<h2 data-placeholder='Heading 2'><br /></h2>")})),o.addEventListener("click",(e=>{r("<h3 data-placeholder='Heading 3'><br /></h3>")})),e.addEventListener("keydown",(e=>{"Enter"===e.key&&t.classList.contains("open")&&(t.children[2].click(),e.preventDefault())}))})(e)})();